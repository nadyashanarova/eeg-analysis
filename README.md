# Техническая инструкция по запуску проекта анализа данных ЭЭГ

Данный проект реализует полный цикл обработки сырых данных с нейрогарнитуры Emotiv Epoc+: от очистки сигналов до построения графиков вызванных потенциалов (ERP) и динамики эмоций.

## 1. Установка и Требования

* Python 3.9 или выше
* Установленные зависимости:

```bash
pip install -r requirements.txt
```

Рекомендуется использовать виртуальное окружение.

---

## 2. Структура проекта
Проект ожидает следующую структуру файлов:
```
project_root/
├── raw_data/                  # ВХОДНЫЕ ДАННЫЕ
│   ├── <ID>_RAW DATA.csv
│   ├── <ID>_intervalMarker.csv
│   └── 0_..._basic_pre_processing.csv  # Специфичный файл для Пилота (ID 0)
│
├── erp_results/               # РЕЗУЛЬТАТЫ ЗАДАЧИ 1
│   ├── *.png                  # ERP-графики
│   └── Preprocessing_Results.xlsx  # Отчет по качеству данных
│
├── emotions_results/          # РЕЗУЛЬТАТЫ ЗАДАЧИ 2
│   └── *.png                  # Графики эмоциональных метрик
│
├── task_1.py                  # Скрипт запуска ERP-анализа
├── task_2.py                  # Скрипт запуска анализа эмоций
├── config.py                  # Настройки ERP
├── config_emotions.py         # Настройки Эмоций
├── data_loader.py             # Логика загрузки для Задачи 2
└── handlers.py                # Логика загрузки и фильтрации для Задачи 1```
```

## 3. Запуск ERP-анализа (Задача 1)

```bash
python task_1.py
```

1.  Скрипт сканирует папку `raw_data`.
2.  Применяет фильтры (Band-pass 1-30 Гц, Notch 50 Гц, DC removal).
3.  Строит 24 усредненных графика (PNG) в папке `erp_results/`.
4.  Генерирует отчет `Preprocessing_Results.xlsx` с количеством валидных и отбракованных эпох для каждого респондента

---

## 4. Запуск анализа эмоциональных метрик (Задача 2 + задача со звездочкой)

```bash
python task_2.py
```

1.  Извлекает метрики (Stress, Interest, Engagement и др.).
2.  Выполняет коррекцию относительно базовой линии (Baseline Correction).
3.  Строит графики динамики эмоций в папке `emotions_results/`:
    *   `_General.png`: Усреднение по всем респондентам.
    *   `_Gender.png`: Сравнение групп Мужчины vs Женщины (при наличии данных).
---

## 5. Особенности работы

## 5. Технические особенности решения

Проект автоматически обрабатывает сложные случаи и ошибки в исходных данных:

1.  **Интеграция Пилотного респондента (Subject 0):**
    *   Реализован кастомный парсер для извлечения данных из вложенной структуры CSV (колонка `index`), что позволило восстановить 100% событий для пилота.
2.  **Исправление опечаток (Name Mapping):**
    *   Система автоматически приводит разнородные названия стимулов (например, `TG_MASK`, `TG_EGE_THR_1`) к единому стандарту.
3.  **Синхронизация времени:**
    *   Автоматическое определение формата времени (Relative vs UNIX Timestamp) и устранение рассинхрона между файлами маркеров и сигналов.